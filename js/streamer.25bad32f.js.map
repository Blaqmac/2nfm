{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.string.includes.js","webpack:///./src/views/Streamer.vue?ed2c","webpack:///./node_modules/core-js/internals/not-a-regexp.js","webpack:///./src/views/Streamer.vue?7781","webpack:///./src/assets/svgs/video.svg","webpack:///./src/assets/svgs/audio.svg","webpack:///./src/components/Streamer/StopSection.vue?76d1","webpack:///./src/assets/svgs/copy.svg","webpack:///src/components/Streamer/StopSection.vue","webpack:///./src/components/Streamer/StopSection.vue?4ac6","webpack:///./src/components/Streamer/StopSection.vue","webpack:///./src/components/DesktopCapturer.vue?e369","webpack:///src/components/DesktopCapturer.vue","webpack:///./src/components/DesktopCapturer.vue?3fdb","webpack:///./src/components/DesktopCapturer.vue","webpack:///./src/components/StreamerConnection.vue?1030","webpack:///src/components/StreamerConnection.vue","webpack:///./src/components/StreamerConnection.vue?043f","webpack:///./src/components/StreamerConnection.vue","webpack:///src/views/Streamer.vue","webpack:///./src/views/Streamer.vue?0983","webpack:///./src/views/Streamer.vue","webpack:///./node_modules/core-js/internals/correct-is-regexp-logic.js","webpack:///./src/components/Streamer/StopSection.vue?5b3d","webpack:///./node_modules/core-js/modules/es.array.includes.js"],"names":["$","notARegExp","requireObjectCoercible","correctIsRegExpLogic","target","proto","forced","includes","searchString","String","this","indexOf","arguments","length","undefined","isRegExp","module","exports","it","TypeError","render","_vm","_h","$createElement","_c","_self","staticClass","ref","attrs","isVideo","enableMic","on","onIsSharing","onGotStream","onSetDefaults","bandwidth","codecs","room_id","room_password","privacy","onSessionId","onViewerCount","onIdTaken","class","live","isSharingOn","sessionId","_v","_s","useridAlreadyTaken","_e","directives","name","rawName","value","expression","domProps","setRoomName","$event","composing","_q","Array","isArray","_i","$$a","$$el","$$c","checked","$$v","$$i","concat","slice","$$selectedVal","prototype","filter","call","options","o","selected","map","val","_value","multiple","startStream","viewerCount","stream","stopStream","staticRenderFns","functional","data","children","classNames","style","staticStyle","rest","Object","assign","copyUrl","showPreview","_m","components","CopySvg","Player","props","type","MediaStream","default","Number","copyNotification","watch","methods","input","setAttribute","document","body","appendChild","select","result","removeChild","setTimeout","innerText","$emit","component","enableVideo","Boolean","isSharing","enableAudio","newValue","setDefaults","captureDesktop","onAccessApproved","video","audio","autoGainControl","echoCancellation","noiseSuppression","googDisableLocalEcho","startCapturing","gotStream","addEventListener","addStreamStopListener","streamEndedEvent","getAudioTracks","forEach","track","getVideoTracks","roomPassword","roomId","connection","mounted","window","setOffline","setOnline","beforeDestroy","removeEventListener","shareStreamUsingRTCMultiConnection","RTCMultiConnection","socketURL","autoCloseEntireSession","publicRoomIdentifier","socketMessageEvent","password","enableLogs","session","oneway","candidates","stun","turn","iceTransportPolicy","iceProtocols","tcp","udp","optionalArgument","optional","mandatory","channel","sessionid","userid","autoReDialOnFailure","getExternalIceServers","iceServers","IceServersHandler","processSdp","sdp","setBandwidth","CodecsHandler","min","max","sdpConstraints","OfferToReceiveAudio","OfferToReceiveVideo","onstream","onstreamended","event","mediaElement","pause","console","error","e","onUserIdAlreadyTaken","dontCaptureUserMedia","attachStreams","push","removeTrack","extra","systemAudioId","micId","text","clearInterval","looper","socketCustomEvent","alert","onSocketDisconnect","onSocketError","onmessage","newChatMessage","receivedChatMessage","checkmark_id","open","roomOpenCallback","onleave","participants","count","onPeerStateChanged","setViewerCount","receiverViewerCount","updateExtraData","getTracks","stop","closeSocket","replace","LogoSvg","VideoSvg","AudioSvg","StopSection","DesktopCapturer","StreamerConnection","desktop_id","constraints","localStorage","getItem","streaming_method","protectedRoutes","$refs","capturer","setItem","parseInt","isAudio","id","takenID","wellKnownSymbol","MATCH","METHOD_NAME","regexp","f","$includes","addToUnscopables","arrayMethodUsesToLength","USES_TO_LENGTH","ACCESSORS","1","el"],"mappings":"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","file":"js/streamer.25bad32f.js","sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar notARegExp = require('../internals/not-a-regexp');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar correctIsRegExpLogic = require('../internals/correct-is-regexp-logic');\n\n// `String.prototype.includes` method\n// https://tc39.github.io/ecma262/#sec-string.prototype.includes\n$({ target: 'String', proto: true, forced: !correctIsRegExpLogic('includes') }, {\n  includes: function includes(searchString /* , position = 0 */) {\n    return !!~String(requireObjectCoercible(this))\n      .indexOf(notARegExp(searchString), arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Streamer.vue?vue&type=style&index=0&id=6d4473de&scoped=true&lang=sass&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Streamer.vue?vue&type=style&index=0&id=6d4473de&scoped=true&lang=sass&\"","var isRegExp = require('../internals/is-regexp');\n\nmodule.exports = function (it) {\n  if (isRegExp(it)) {\n    throw TypeError(\"The method doesn't accept regular expressions\");\n  } return it;\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"frow centered\"},[_c('DesktopCapturer',{ref:\"capturer\",attrs:{\"enableVideo\":_vm.isVideo,\"enableMic\":_vm.enableMic},on:{\"isSharing\":_vm.onIsSharing,\"gotStream\":_vm.onGotStream,\"setDefaults\":_vm.onSetDefaults}}),_c('StreamerConnection',{ref:\"connection\",attrs:{\"bandwidth\":_vm.bandwidth,\"codecs\":_vm.codecs,\"roomId\":_vm.room_id,\"roomPassword\":_vm.room_password,\"privacy\":_vm.privacy,\"isVideo\":_vm.isVideo},on:{\"sessionId\":_vm.onSessionId,\"viewerCount\":_vm.onViewerCount,\"idTaken\":_vm.onIdTaken}}),_c('div',{staticClass:\"col-md-1-2\"},[_c('router-link',{attrs:{\"to\":\"/\"}},[_c('LogoSvg',{attrs:{\"id\":\"logo\"}})],1),_c('div',{class:{ live: _vm.isSharingOn && _vm.sessionId },attrs:{\"id\":\"live-indicator\"}},[_vm._v(\"LIVE\")])],1),_c('div',{staticClass:\"col-md-1-2\"},[(_vm.useridAlreadyTaken)?_c('div',{attrs:{\"id\":\"id-taken\"}},[_vm._v(\"⚠️ Whoops,\"),_c('b',[_vm._v(\" \"+_vm._s(_vm.useridAlreadyTaken)+\" \")]),_vm._v(\"already taken! Please choose another room name.\")]):_vm._e(),(!_vm.isSharingOn || !_vm.sessionId)?_c('section',{attrs:{\"id\":\"setup-section\"}},[_c('label',{staticClass:\"row-start\",attrs:{\"id\":\"room-id-label\"}},[_c('span',{staticClass:\"shrink-0\"},[_vm._v(\"2n.fm/\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.room_id),expression:\"room_id\"}],attrs:{\"id\":\"room-id\",\"type\":\"text\",\"placeholder\":\"Random\"},domProps:{\"value\":(_vm.room_id)},on:{\"change\":_vm.setRoomName,\"blur\":_vm.setRoomName,\"input\":function($event){if($event.target.composing){ return; }_vm.room_id=$event.target.value}}})]),_c('section',{attrs:{\"id\":\"options\"}},[_c('div',{staticClass:\"label\"},[_vm._v(\"Options\")]),_c('div',{staticClass:\"frow gutters\"},[_c('div',{staticClass:\"col-xs-1-2\"},[_c('label',{staticClass:\"row-start\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.privacy),expression:\"privacy\"}],attrs:{\"type\":\"radio\",\"value\":\"private\"},domProps:{\"checked\":_vm._q(_vm.privacy,\"private\")},on:{\"change\":function($event){_vm.privacy=\"private\"}}}),_vm._v(\"Private Room\")]),_c('label',{staticClass:\"row-start mb-0\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.privacy),expression:\"privacy\"}],attrs:{\"type\":\"radio\",\"value\":\"public\"},domProps:{\"checked\":_vm._q(_vm.privacy,\"public\")},on:{\"change\":function($event){_vm.privacy=\"public\"}}}),_vm._v(\"Public Room\")])]),_c('div',{staticClass:\"col-xs-1-2\"},[_c('label',{staticClass:\"row-start\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.enableMic),expression:\"enableMic\"}],attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.enableMic)?_vm._i(_vm.enableMic,null)>-1:(_vm.enableMic)},on:{\"change\":function($event){var $$a=_vm.enableMic,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.enableMic=$$a.concat([$$v]))}else{$$i>-1&&(_vm.enableMic=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.enableMic=$$c}}}}),_vm._v(\"Enable Microphone (Beta)\")]),_c('label',{staticClass:\"row-start\"},[_vm._v(\"Codec\"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.codecs),expression:\"codecs\"}],staticClass:\"ml-5\",on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.codecs=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"value\":\"vp9\"}},[_vm._v(\"VP9 (Screensharing)\")]),_c('option',{attrs:{\"value\":\"vp8\"}},[_vm._v(\"VP8 (Gaming)\")])])])])])]),_c('section',{attrs:{\"id\":\"stream-section\"}},[_c('div',{attrs:{\"id\":\"start\"}},[_c('div',{staticClass:\"label\"},[_vm._v(\"Start\")]),_c('div',{staticClass:\"frow gutters\"},[_c('div',{staticClass:\"col-xs-1-2\"},[_c('div',{staticClass:\"stream-button\",attrs:{\"id\":\"video-button\"},on:{\"click\":function($event){return _vm.startStream(true)}}},[_c('div',{staticClass:\"frow column-center\"},[_c('VideoSvg'),_vm._v(\"Video\")],1)])]),_c('div',{staticClass:\"col-xs-1-2\"},[_c('div',{staticClass:\"stream-button\",attrs:{\"id\":\"audio-button\"},on:{\"click\":function($event){return _vm.startStream()}}},[_c('div',{staticClass:\"frow column-center\"},[_c('AudioSvg'),_vm._v(\"Audio Only\")],1)])])])])])]):_vm._e(),(_vm.isSharingOn && _vm.sessionId)?_c('StopSection',{attrs:{\"sessionId\":_vm.sessionId,\"viewerCount\":_vm.viewerCount,\"stream\":_vm.stream},on:{\"stopStream\":_vm.stopStream}}):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n      export default {\n        functional: true,\n        render(_h, _vm) {\n          const { _c, _v, data, children = [] } = _vm;\n\n          const {\n            class: classNames,\n            staticClass,\n            style,\n            staticStyle,\n            attrs = {},\n            ...rest\n          } = data;\n\n          return _c(\n            'svg',\n            {\n              class: [classNames,staticClass],\n              style: [style,staticStyle],\n              attrs: Object.assign({\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 24 24\"}, attrs),\n              ...rest,\n            },\n            children.concat([_c('g',{attrs:{\"fill\":\"none\",\"fill-rule\":\"evenodd\"}},[_c('path',{attrs:{\"d\":\"M1 18v3h3c0-1.7-1.3-3-3-3zm0-4v2c2.8 0 5 2.2 5 5h2c0-3.9-3.1-7-7-7zm0-4v2c5 0 9 4 9 9h2c0-6.1-4.9-11-11-11zm20-7H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\"}})])])\n          )\n        }\n      }\n    ","\n      export default {\n        functional: true,\n        render(_h, _vm) {\n          const { _c, _v, data, children = [] } = _vm;\n\n          const {\n            class: classNames,\n            staticClass,\n            style,\n            staticStyle,\n            attrs = {},\n            ...rest\n          } = data;\n\n          return _c(\n            'svg',\n            {\n              class: [classNames,staticClass],\n              style: [style,staticStyle],\n              attrs: Object.assign({\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 24 24\"}, attrs),\n              ...rest,\n            },\n            children.concat([_c('path',{attrs:{\"d\":\"M2 6h3.828c-1.335 2.905-1.335 9.096 0 12H2c-1.311-1.108-2-3.551-2-5.995C0 9.555.692 7.105 2 6zm22 6.005c.005 8.031-3.145 12.864-6.121 11.864-.774-.26-9.567-5.579-9.567-5.579-1.993-2.22-1.993-10.288 0-12.508 0 0 9.161-5.476 9.548-5.633 2.691-1.086 6.136 3.82 6.14 11.856zm-3.383-7.693c-1.053-2.264-3.002-2.226-4.034.002-.588 1.271-.993 3.165-1.21 4.797h.527c1.587 0 2.873 1.287 2.873 2.875s-1.286 2.875-2.873 2.875h-.515c.217 1.603.616 3.538 1.206 4.89.988 2.271 3.062 2.232 4.033-.002 1.946-4.477 1.772-11.609-.007-15.437z\"}})])\n          )\n        }\n      }\n    ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{attrs:{\"id\":\"stop-section\"}},[_c('router-link',{attrs:{\"id\":\"public-link\",\"to\":_vm.sessionId,\"target\":\"_blank\"}},[_vm._v(_vm._s((\"2n.fm/\" + _vm.sessionId)))]),_c('div',{attrs:{\"id\":\"copy-button\"},on:{\"click\":function($event){return _vm.copyUrl()}}},[_c('CopySvg')],1),(_vm.copyNotification)?_c('div',{staticClass:\"animate-fade-in\",attrs:{\"id\":\"copy-notification\"}},[_vm._v(\"Copied\")]):_vm._e(),_c('div',{staticClass:\"viewer-count\"},[_c('span',{attrs:{\"id\":\"viewer-count-number\"}}),_vm._v(_vm._s(_vm.viewerCount)+\" \"+_vm._s(_vm.viewerCount === 1 ? 'Viewer' : 'Viewers'))]),(_vm.showPreview)?_c('Player',{staticClass:\"mb-20\",attrs:{\"stream\":_vm.stream,\"receiverViewerCount\":_vm.viewerCount,\"disableAutoplay\":true}}):_vm._e(),_c('div',{staticClass:\"frow row-between\"},[_c('button',{staticClass:\"streamer-control-buttons\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.stopStream}},[_vm._v(\"End Sharing\")]),_c('button',{staticClass:\"streamer-control-buttons\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.showPreview = !_vm.showPreview}}},[_vm._v(_vm._s(_vm.showPreview ? 'Hide Preview' : 'Show Preview'))])]),_vm._m(0)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"frow width-100 mt-20\"},[_c('a',{staticClass:\"text-underline\",attrs:{\"href\":\"https://caniuse.com/#search=getDisplayMedia\",\"rel\":\"noreferrer\",\"target\":\"_blank\"}},[_vm._v(\"OS and Browser Limitations\")])])}]\n\nexport { render, staticRenderFns }","\n      export default {\n        functional: true,\n        render(_h, _vm) {\n          const { _c, _v, data, children = [] } = _vm;\n\n          const {\n            class: classNames,\n            staticClass,\n            style,\n            staticStyle,\n            attrs = {},\n            ...rest\n          } = data;\n\n          return _c(\n            'svg',\n            {\n              class: [classNames,staticClass],\n              style: [style,staticStyle],\n              attrs: Object.assign({\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 24 24\"}, attrs),\n              ...rest,\n            },\n            children.concat([_c('path',{attrs:{\"d\":\"M18 6V0H0v18h6v6h18V6h-6zM6 16H2V2h14v4H6v10zm16 6H8V8h14v14z\"}})])\n          )\n        }\n      }\n    ","<style scoped lang=\"sass\">\n#stop-section\n  text-align: center\n\n  #public-link\n    display: inline-block\n    font-size: 40px\n    color: $primary-color\n    margin: 0 auto\n\n  #copy-button\n    display: inline-block\n    margin-left: 14px\n    cursor: pointer\n    svg\n      width: 30px\n      fill: $primary-color\n\n  #copy-notification\n    font-size: 20px\n\n/* XS\n@media (max-width: 767px)\n  #public-link\n    font-size: 30px\n\n.viewer-count\n  margin: 5px auto 20px\n  text-align: center\n  font-size: 20px\n  font-weight: bold\n\n.streamer-control-buttons\n  margin: 0 auto\n  font-size: 30px\n  padding: 15px\n  background: none\n  border: 3px solid $primary-color\n  color: $primary-color\n  border-radius: 10px\n</style>\n\n<template lang=\"pug\">\nsection#stop-section\n  //- router-link#public-link(\n  //-   to=\"{query: { s: sessionId, p: room_password }}`}\" target=\"_blank\"\n  //- )\n  router-link#public-link(:to=\"sessionId\" target=\"_blank\")\n    | {{ `2n.fm/${sessionId}` }}\n  #copy-button(@click=\"copyUrl()\")\n      CopySvg\n  #copy-notification.animate-fade-in(v-if=\"copyNotification\")\n    | Copied\n  .viewer-count\n    span#viewer-count-number\n    | {{ viewerCount }} {{ viewerCount === 1 ? 'Viewer' : 'Viewers' }}\n  Player.mb-20(\n    v-if=\"showPreview\"\n    :stream=\"stream\"\n    :receiverViewerCount=\"viewerCount\"\n    :disableAutoplay=\"true\"\n  )\n  .frow.row-between\n    button.streamer-control-buttons(type=\"button\" @click=\"stopStream\")\n      | End Sharing\n    button.streamer-control-buttons(type=\"button\" @click=\"showPreview = !showPreview\")\n      | {{ showPreview ? 'Hide Preview' : 'Show Preview' }}\n  .frow.width-100.mt-20\n    a.text-underline(\n      href=\"https://caniuse.com/#search=getDisplayMedia\"\n      rel=\"noreferrer\"\n      target=\"_blank\"\n    )\n      | OS and Browser Limitations\n</template>\n\n<script>\nimport CopySvg from '@/assets/svgs/copy.svg';\n\nimport Player from '@/components/Player/Player.vue';\n\nexport default {\n  name: 'StopSection',\n  components: {\n    CopySvg,\n    Player,\n  },\n  props: {\n    stream: {\n      type: MediaStream,\n      default: null,\n    },\n    sessionId: {\n      type: String,\n      default: null,\n    },\n    viewerCount: {\n      type: Number,\n      default: 0,\n    },\n  },\n  data() {\n    return {\n      copyNotification: false,\n      showPreview: false,\n    };\n  },\n  watch: {\n  },\n  methods: {\n    copyUrl() {\n      let copyText = document.getElementById('public-link');\n      let input = document.createElement('input');\n      input.setAttribute('value', `https://${copyText.innerText}`);\n      document.body.appendChild(input);\n      input.select();\n\n      let result = document.execCommand('copy');\n      const copyNotification = document.getElementById('copy-notification');\n      if (result) {\n        document.body.removeChild(input);\n        this.copyNotification = true;\n        setTimeout(() => {\n          this.copyNotification = false;\n        }, 5000);\n      } else {\n        copyNotification.innerText = 'Copy failed';\n      }\n    },\n    stopStream() {\n      this.$emit('stopStream');\n    },\n  },\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StopSection.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StopSection.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./StopSection.vue?vue&type=template&id=474b491c&scoped=true&lang=pug&\"\nimport script from \"./StopSection.vue?vue&type=script&lang=js&\"\nexport * from \"./StopSection.vue?vue&type=script&lang=js&\"\nimport style0 from \"./StopSection.vue?vue&type=style&index=0&id=474b491c&scoped=true&lang=sass&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"474b491c\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\"div\")}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\n  \n</template>\n\n<script>\nexport default {\n  name: 'DesktopCapturer',\n  props: {\n    enableVideo: Boolean,\n    enableMic: Boolean,\n  },\n  data() {\n    return {\n      isSharing: false,\n      enableAudio: false,\n    };\n  },\n  watch: {\n    isSharing(newValue) {\n      this.$emit('isSharing', newValue);\n    },\n  },\n  methods: {\n    setDefaults() {\n      this.$emit('setDefaults');\n      this.isSharing = false;\n    },\n    startStream() {\n      this.setDefaults();\n      this.isSharing = true;\n      this.enableAudio = true;\n      this.captureDesktop();\n    },\n    stopStream() {\n      this.isSharing = false;\n\n      // SM: post Vue migration, what previously ran in captureDesktop is instead in setDefaults\n      // this.captureDesktop();\n      this.setDefaults();\n    },\n    captureDesktop() {\n      this.onAccessApproved();\n    },\n    onAccessApproved() {\n      // console.log(navigator.mediaDevices.getSupportedConstraints());\n\n      let constraints = {\n        video: {\n          // TODO: displaySurface support is waiting on browser support\n          // https://developer.mozilla.org/en-US/docs/Web/API/MediaTrackConstraints/displaySurface\n          // displaySurface: [\"application\", \"browser\", \"monitor\", \"window\"]\n        },\n        audio: {\n          autoGainControl: false,\n          echoCancellation: false,\n          noiseSuppression: false,\n          googDisableLocalEcho: false, // https://www.chromestatus.com/feature/5056629556903936\n        },\n      };\n\n      const startMicCapture = async () => {\n        let captureMicStream;\n        try {\n          captureMicStream = await navigator.mediaDevices.getUserMedia(\n            {\n              audio: true,\n              video: false,\n            },\n          );\n        } catch (err) {\n          console.error('Error getting microphone', err);\n          alert('Your browser denied microphone access');\n          // this.setDefaults();\n        }\n        return captureMicStream;\n      };\n\n      const startScreenCapture = async () => {\n        let captureStream;\n        try {\n          captureStream = await navigator.mediaDevices.getDisplayMedia(\n            constraints,\n          );\n        } catch (err) {\n          this.setDefaults();\n        }\n        return captureStream;\n      };\n\n      const startCapturing = async () => {\n        let micStream = null;\n        if (this.enableMic === true) {\n          micStream = await startMicCapture();\n        }\n        let stream = await startScreenCapture();\n        // console.log(stream.getTracks()[0].getCapabilities());\n        // console.log(stream.getTracks()[0].getSettings());\n        if (!this.enableVideo && stream.getAudioTracks().length === 0) {\n          alert('Make sure to check the \"Share audio\" box in Google Chrome');\n        }\n        if (stream.getAudioTracks().length > 0) {\n          stream.systemAudioId = stream.getAudioTracks()[0].id;\n        }\n        if (micStream) {\n          stream.addTrack(micStream.getAudioTracks()[0]);\n          stream.micId = micStream.getAudioTracks()[0].id;\n        }\n        this.gotStream(stream);\n      };\n      startCapturing();\n    },\n    gotStream(stream) {\n      if (!stream) {\n        this.setDefaults();\n        return;\n      }\n\n      stream.addEventListener('inactive', () => {\n        this.setDefaults();\n      });\n\n      this.addStreamStopListener(stream, () => {\n        this.setDefaults();\n      });\n\n      this.$emit('gotStream', stream);\n    },\n    addStreamStopListener(stream, callback) {\n      var streamEndedEvent = 'ended';\n      if ('oninactive' in stream) {\n        streamEndedEvent = 'inactive';\n      }\n      stream.addEventListener(\n        streamEndedEvent,\n        function() {\n          callback();\n          callback = function() {};\n        },\n        false,\n      );\n      stream.getAudioTracks().forEach(function(track) {\n        track.addEventListener(\n          streamEndedEvent,\n          function() {\n            callback();\n            callback = function() {};\n          },\n          false,\n        );\n      });\n      stream.getVideoTracks().forEach(function(track) {\n        track.addEventListener(\n          streamEndedEvent,\n          function() {\n            callback();\n            callback = function() {};\n          },\n          false,\n        );\n      });\n    },\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DesktopCapturer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DesktopCapturer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DesktopCapturer.vue?vue&type=template&id=b0bc1522&lang=pug&\"\nimport script from \"./DesktopCapturer.vue?vue&type=script&lang=js&\"\nexport * from \"./DesktopCapturer.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\"div\")}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\n  \n</template>\n\n<script>\nimport { CodecsHandler } from '../utils/background/helpers/CodecsHandler';\nimport { IceServersHandler } from '../utils/background/helpers/IceServersHandler';\n\nexport default {\n  name: 'StreamerConnection',\n  props: {\n    bandwidth: {\n      type: Number,\n      default: 8192,\n    },\n    codecs: {\n      type: String,\n      default: 'default',\n    },\n    roomPassword: {\n      type: String,\n      default: '',\n    },\n    roomId: {\n      type: String,\n      default: '',\n    },\n    privacy: {\n      type: String,\n      default: 'private',\n    },\n    isVideo: {\n      type: Boolean,\n      default: false,\n    },\n  },  \n  data() {\n    return {\n      connection: null,\n    };\n  },\n  mounted() {\n    window.addEventListener('offline', this.setOffline, false);\n    window.addEventListener('online', this.setOnline, false);\n  },\n  beforeDestroy() {\n    window.removeEventListener('offline', this.setOffline, false);\n    window.removeEventListener('online', this.setOnline, false);\n\n    this.connection = null;\n    delete this.connection;\n  },\n  methods: {\n    shareStreamUsingRTCMultiConnection(stream) {\n      // www.RTCMultiConnection.org/docs/\n      this.connection = new RTCMultiConnection();\n      this.connection.socketURL = 'https://api.2n.fm:9001/';\n      this.connection.autoCloseEntireSession = true;\n      // this must match the viewer page\n      if (this.privacy === 'public') {\n        this.connection.publicRoomIdentifier = 'desktopCapture';\n      }\n      \n      this.connection.socketMessageEvent = 'desktopCapture';\n\n      this.connection.password = null;\n      if (this.roomPassword && this.roomPassword.length) {\n        this.connection.password = this.roomPassword;\n      }\n\n      this.connection.enableLogs = false;\n      this.connection.session = {\n        audio: true,\n        video: true,\n        data: true,\n        oneway: true,\n      };\n\n      this.connection.candidates = {\n        stun: true,\n        turn: true,\n      };\n      this.connection.iceTransportPolicy = 'relay';\n\n      this.connection.iceProtocols = {\n        tcp: true,\n        udp: true,\n      };\n\n      this.connection.optionalArgument = {\n        optional: [],\n        mandatory: {},\n      };\n\n      this.connection.channel = this.connection.sessionid = this.connection.userid;\n\n      if (this.roomId && this.roomId.length) {\n        this.connection.channel = this.connection.sessionid = this.connection.userid = this.roomId;\n      }\n\n      this.connection.autoReDialOnFailure = true;\n      this.connection.getExternalIceServers = false;\n\n      this.connection.iceServers = IceServersHandler.getIceServers();\n\n      this.connection.processSdp = (sdp) => {\n        if (this.bandwidth) {\n          if (\n            this.bandwidth &&\n            !isNaN(this.bandwidth) &&\n            this.bandwidth != 'NaN' &&\n            typeof this.bandwidth == 'number'\n          ) {\n            sdp = setBandwidth(sdp, this.bandwidth);\n            sdp = CodecsHandler.setVideoBitrates(sdp, {\n              min: this.bandwidth,\n              max: this.bandwidth,\n            });\n          }\n        }\n\n        if (!!this.codecs && this.codecs !== 'default') {\n          if (this.isVideo) {\n            sdp = CodecsHandler.preferCodec(sdp, this.codecs);\n          } else {\n            sdp = CodecsHandler.preferCodec(sdp, 'vp8');\n          }\n        }\n        return sdp;\n      };\n\n      // www.rtcmultiexternalThis.connection.org/docs/sdpConstraints/\n      this.connection.sdpConstraints.mandatory = {\n        OfferToReceiveAudio: false,\n        OfferToReceiveVideo: false,\n      };\n\n      this.connection.onstream = this.connection.onstreamended = (event) => {\n        try {\n          event.mediaElement.pause();\n          delete event.mediaElement;\n        } catch (e) {\n          console.error(e);\n        }\n      };\n\n      this.connection.onUserIdAlreadyTaken = (useridAlreadyTaken) => {\n        this.$emit('idTaken', useridAlreadyTaken);\n      };\n\n      // www.RTCMultiConnection.org/docs/dontCaptureUserMedia/\n      this.connection.dontCaptureUserMedia = true;\n\n      // www.RTCMultiConnection.org/docs/attachStreams/\n      this.connection.attachStreams.push(stream);\n\n      // TODO: Remove the video track from the source stream\n      if (\n        !this.isVideo &&\n        this.connection.attachStreams[0].getVideoTracks().length > 0\n      ) {\n        this.connection.attachStreams[0].removeTrack(\n          this.connection.attachStreams[0].getVideoTracks()[0],\n        );\n      }\n\n      if(stream.systemAudioId) {\n        this.connection.extra.systemAudioId = stream.systemAudioId;\n        // this.connection.updateExtraData();\n      }\n\n      if (stream.micId) {\n        this.connection.extra.micId = stream.micId;\n        // this.connection.updateExtraData();\n      }\n\n      var text = '-';\n      const looper = setInterval(() => {\n        if (!this.connection) {\n          this.setViewerCount(0);\n          clearInterval(looper);\n          return;\n        }\n\n        if (this.connection.isInitiator) {\n          this.setViewerCount(0);\n          clearInterval(looper);\n          return;\n        }\n\n        text += ' -';\n        if (text.length > 6) {\n          text = '-';\n        }\n\n        this.setViewerCount(text);\n      }, 500);\n      \n\n      // www.RTCMultiConnection.org/docs/open/\n      this.connection.socketCustomEvent = this.connection.sessionid;\n\n      const roomOpenCallback = (isRoomOpened, roomid, error) => {\n        if (error) {\n          alert(error);\n        }\n\n        // any key-values set here should be reset in setDefaults.js\n        this.$emit('sessionId', this.connection.sessionid);\n\n        this.setViewerCount(0);\n\n        this.connection.socket.on(\n          this.connection.socketCustomEvent,\n          (message) => {\n            if (message.receivedYourScreen) {\n              this.setViewerCount(\n                this.connection.isInitiator\n                  ? this.connection.getAllParticipants().length\n                  : 0,\n              );\n            }\n          },\n        );\n      };\n\n      this.connection.onSocketDisconnect = () => {\n        // alert('externalThis.connection to the server is closed.');\n        if (this.connection.getAllParticipants().length > 0) return;\n\n        this.setDefaults();\n      };\n\n      this.connection.onSocketError = () => {\n        alert('Unable to connect to the server. Please try again.');\n\n        setTimeout(() => {\n          this.setDefaults();\n        }, 1000);\n      };\n\n      // this.connection.onopen = (event) => {\n      //   //\n      // };\n\n      this.connection.onmessage = (event) => {\n        if (event.data.newChatMessage) {\n          // this.runtimePort.postMessage({\n          //   messageFromContentScript1234: true,\n          //   newChatMessage: event.data.newChatMessage\n          // });\n\n          this.connection.send({\n            receivedChatMessage: true,\n            checkmark_id: event.data.checkmark_id,\n          });\n        }\n\n        // if (event.data.receivedChatMessage) {\n        //   this.runtimePort.postMessage({\n        //     messageFromContentScript1234: true,\n        //     receivedChatMessage: true,\n        //     checkmark_id: event.data.checkmark_id\n        //   });\n        // }\n      };\n\n      this.connection.open(this.connection.sessionid, roomOpenCallback);\n\n      var oldLength = 0;\n      this.connection.onleave = (event) =>{\n        const participants = this.connection.getAllParticipants();\n        let count = participants.length;\n        if (participants.includes(event.userid)) {\n          count--;\n        }\n        this.setViewerCount(count);\n      };\n\n      this.connection.onPeerStateChanged = () => {\n        const participantsCount = this.connection.getAllParticipants().length;\n        if (oldLength != participantsCount) {\n          // sendTabTitle();\n        }\n        this.setViewerCount(\n          this.connection.isInitiator ? participantsCount : 0,\n        );\n      };\n    },\n    setViewerCount(count) {\n      this.$emit('viewerCount', count);\n      if (this.connection) {\n        this.connection.extra.receiverViewerCount = count;\n        this.connection.updateExtraData();\n      }\n    },\n    setOffline() {\n      if (!this.connection || !this.connection.attachStreams.length) return;\n      this.setDefaults();\n    },\n    setOnline() {\n      if (!this.connection) return;\n      this.setDefaults();\n    },\n    setDefaults() {     \n      if (this.connection) {\n        this.connection.attachStreams.forEach((stream) => {\n          try {\n            stream.getTracks().forEach((track) => {\n              try {\n                track.stop();\n              } catch (e) {\n                console.error(e);\n              }\n            });\n          } catch (e) {\n            console.error(e);\n          }\n        });\n\n        try {\n          this.connection.closeSocket();\n        } catch (e) {\n          console.error(e);\n        }\n        this.connection = null;\n      }\n\n      this.setViewerCount(0);\n    },\n  },\n};\n\nfunction setBandwidth(sdp, value) {\n  sdp = sdp.replace(/b=AS([^\\r\\n]+\\r\\n)/g, '');\n  sdp = sdp.replace(\n    /a=mid:video\\r\\n/g,\n    'a=mid:video\\r\\nb=AS:' + value + '\\r\\n',\n  );\n  return sdp;\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StreamerConnection.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StreamerConnection.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./StreamerConnection.vue?vue&type=template&id=5f85ab61&lang=pug&\"\nimport script from \"./StreamerConnection.vue?vue&type=script&lang=js&\"\nexport * from \"./StreamerConnection.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<style scoped lang=\"sass\">\n.card\n  background-color: $white\n  padding: 15px\n  text-align: center\n\n#logo\n  margin: 0 auto\n  width: 228px\n  height: auto\n  fill: $primary-color\n\n#live-indicator\n  margin: 15px auto 0\n  width: 228px\n  color: $tertiary-color\n  border-radius: 20px\n  border: 6px solid $tertiary-color\n  font-weight: bold\n  font-size: 91px\n  text-align: center\n\n  &.live\n    color: red\n    border-color: red\n    animation: pulse 1.5s ease-in-out infinite alternate\n\n#id-taken\n  color: #721c24\n  background-color: #f8d7da\n  border: 1px solid #f5c6cb\n  padding: 0.6em\n  margin-top: 0.5em\n  border-radius: $border-radius-small\n\n/* XS\n@media (max-width: 767px)\n  #logo\n    margin: 0 auto\n    width: 114px\n  #live-indicator\n    width: 114px\n    border-radius: 10px\n    border: 3px solid $tertiary-color\n    font-size: 45px\n    margin-bottom: 30px\n\n#room-id-label\n  font-size: 40px\n  color: $primary-color\n\n  input\n    font-size: 40px\n    border-width: 4px\n\n/* XS\n@media (max-width: 767px)\n  #room-id-label\n    font-size: 30px\n\n    input\n      font-size: 30px\n      border-width: 2px\n\n#options\n  border: 2px solid $tertiary-color\n  border-radius: 10px\n  padding: 40px\n  margin: 40px 0\n  position: relative\n\n  .label\n    position: absolute\n    top: -9px\n    left: 30px\n    background-color: $white\n    padding: 0 8px\n    width: auto\n\n.settings-item\n  margin-bottom: 40px\n\n  label\n    margin-bottom: 0\n\n#start\n  border: 2px solid $tertiary-color\n  border-radius: 10px\n  padding: 40px\n  margin-top: 40px\n  position: relative\n\n  .label\n    position: absolute\n    top: -9px\n    left: 30px\n    background-color: $white\n    padding: 0 8px\n    width: auto\n\n.stream-button\n  cursor: pointer\n  transition: color 0.3s\n\n  &:hover\n    color: $black\n\n  svg\n    width: auto\n    height: 40px\n    margin-bottom: 10px\n\n  path\n    fill: $primary-color\n    transition: fill 0.3s\n\n  &:hover svg path\n    fill: $black\n</style>\n\n<template lang=\"pug\">\n.frow.centered\n  DesktopCapturer(\n    ref=\"capturer\"\n    :enableVideo=\"isVideo\"\n    :enableMic=\"enableMic\"\n    @isSharing=\"onIsSharing\"\n    @gotStream=\"onGotStream\"\n    @setDefaults=\"onSetDefaults\"\n  )\n  StreamerConnection(\n    ref=\"connection\"\n    :bandwidth=\"bandwidth\"\n    :codecs=\"codecs\"\n    :roomId=\"room_id\"\n    :roomPassword=\"room_password\"\n    :privacy=\"privacy\"\n    :isVideo=\"isVideo\"\n    @sessionId=\"onSessionId\"\n    @viewerCount=\"onViewerCount\"\n    @idTaken=\"onIdTaken\"\n  )\n  .col-md-1-2\n    router-link(to=\"/\")\n      LogoSvg#logo\n    #live-indicator(:class=\"{ live: isSharingOn && sessionId }\") LIVE\n  .col-md-1-2\n    div#id-taken(v-if=\"useridAlreadyTaken\")\n      | ⚠️ Whoops,\n      b &nbsp;{{useridAlreadyTaken}}&nbsp;\n      | already taken! Please choose another room name.\n    section#setup-section(v-if=\"!isSharingOn || !sessionId\")\n      label#room-id-label.row-start\n        span.shrink-0 2n.fm/\n        input#room-id(\n          type=\"text\"\n          placeholder=\"Random\"\n          v-model=\"room_id\"\n          @change=\"setRoomName\"\n          @blur=\"setRoomName\")\n      section#options\n        .label Options\n        .frow.gutters\n          //- .col-xs-1-2\n          //-   .settings-item\n          //-     label\n          //-       | Resolution\n          //-       select#resolutions\n          //-         option(value=\"fit-screen\" selected=\"\") Fit Screen\n          //-         option(value=\"4K\") 4K (2160p)\n          //-         option(value=\"1080p\") Full-HD (1080p)\n          //-         option(value=\"720p\") HD (720p)\n          //-         option(value=\"480p\") SD (480p)\n          //-         option(value=\"360p\") SD (360p)\n          .col-xs-1-2\n            label.row-start\n              input(type=\"radio\" value=\"private\" v-model=\"privacy\")\n              | Private Room\n            label.row-start.mb-0\n              input(type=\"radio\" value=\"public\" v-model=\"privacy\")\n              | Public Room\n          .col-xs-1-2\n            label.row-start\n              input(type=\"checkbox\" v-model=\"enableMic\")\n              | Enable Microphone (Beta)\n            label.row-start\n              | Codec\n              select.ml-5(v-model=\"codecs\")\n                //- option(value=\"default\" selected=\"\") Default (VP9)\n                option(value=\"vp9\") VP9 (Screensharing)\n                option(value=\"vp8\") VP8 (Gaming)\n                //- option(value=\"h264\") H.264\n            //- .text-center\n              span(v-if=\"codecs === 'vp9'\")\n                | Better quality, less data\n              span(v-if=\"codecs === 'vp8'\")\n                | Lower quality, more FPS\n              span(v-if=\"codecs === 'h264'\")\n                | Less strain on oldest devices\n          //- .col-xs-1-2\n          //-   .settings-item.mb-0\n          //-     label\n          //-       | Bandwidth\n          //-       input#bandwidth(\n          //-         type=\"text\"\n          //-         value=\"\"\n          //-         placeholder=\"Optional: 8192, 1048, 512, etc.\"\n          //-         @change=\"setBandwidth\"\n          //-       )\n          //- .col-xs-1-2\n          //-   .settings-item.mb-0\n          //-     label\n          //-       | Room Password\n          //-       input#room_password(type=\"password\" value=\"\" placeholder=\"Optional\")\n      section#stream-section\n        #start\n          .label Start\n          .frow.gutters\n            .col-xs-1-2\n              #video-button.stream-button(@click=\"startStream(true)\")\n                .frow.column-center\n                  VideoSvg\n                  | Video\n            .col-xs-1-2\n              #audio-button.stream-button(@click=\"startStream()\")\n                .frow.column-center\n                  AudioSvg\n                  | Audio Only\n    StopSection(\n      v-if=\"isSharingOn && sessionId\"\n      :sessionId=\"sessionId\"\n      :viewerCount=\"viewerCount\"\n      :stream=\"stream\"\n      @stopStream=\"stopStream\"\n    )\n</template>\n\n<script>\nimport LogoSvg from '@/assets/svgs/logo.svg';\nimport VideoSvg from '@/assets/svgs/video.svg';\nimport AudioSvg from '@/assets/svgs/audio.svg';\n\nimport StopSection from '@/components/Streamer/StopSection.vue';\nimport DesktopCapturer from '@/components/DesktopCapturer.vue';\nimport StreamerConnection from '@/components/StreamerConnection.vue';\n\nexport default {\n  name: 'Streamer',\n  components: {\n    LogoSvg,\n    VideoSvg,\n    AudioSvg,\n    StopSection,\n    DesktopCapturer,\n    StreamerConnection,\n  },\n  data() {\n    return {\n      isSharingOn: false,\n      // sessionId aka room name\n      sessionId: null,\n      stream: null,\n      desktop_id: null,\n      constraints: null,\n      room_password: '',\n      room_id: window.localStorage.getItem('room_id') || '',\n      codecs: 'vp8',\n      bandwidth: null,\n      isVideo: false,\n      streaming_method: 'RTCMultiConnection',\n      viewerCount: 0,\n      privacy: 'private',\n      useridAlreadyTaken: '',\n      enableMic: false,\n    };\n  },\n  mounted() {\n    // document.getElementById('enable-chat').onclick = function() {\n    //   var popup_width = 312;\n    //   var popup_height = 400;\n    //   runtimePort.postMessage({\n    //     messageFromContentScript1234: true,\n    //     openChat: true\n    //   });\n    //   window.open('chat.html','Chat','width='+popup_width+',height='+popup_height\n    //     +',toolbar=0,menubar=0,location=0,status=1,scrollbars=1,resizable=0,top='\n    //     +(screen.height - popup_height)+',left=' + (screen.width - popup_width - 30));\n    //   window.close();\n    // };\n  },\n  methods: {\n    startStream(isVideo = false) {\n      this.isVideo = isVideo;\n\n      if (\n        this.$refs.connection.connection &&\n        this.$refs.connection.connection.attachStreams[0]\n      ) {\n        this.onSetDefaults();\n        return;\n      }\n\n      this.room_id = '';\n\n      if (window.localStorage.getItem('room_id')) {\n        this.room_id = window.localStorage.getItem('room_id');\n      }\n\n      let protectedRoutes = ['streamer'];\n      if (protectedRoutes.includes(this.room_id)) {\n        this.useridAlreadyTaken = 'streamer';\n        return;\n      }\n      this.$refs.capturer.startStream();\n    },\n    stopStream() {\n      this.$refs.capturer.stopStream();\n      this.stream = null;\n    },\n    setRoomName() {\n      this.room_id = this.room_id\n        .trim()\n        .replace(/\\s+/g, '-')\n        .replace(/[^a-zA-Z0-9-_]/g, '')\n        .toLowerCase();\n      window.localStorage.setItem('room_id', this.room_id);\n    },\n    setBandwidth(value) {\n      try {\n        this.bandwidth = parseInt(value);\n      } catch (e) {\n        this.bandwidth = null;\n      }\n    },\n    onGotStream(stream) {\n      this.stream = stream;\n      this.stream.isVideo = this.isVideo;\n      this.stream.isAudio = !this.isVideo;\n      this.$refs.connection.shareStreamUsingRTCMultiConnection(\n        stream,\n        this.isVideo, // TODO: This is redundant if it's also in stream\n      );\n    },\n    onSessionId(id) {\n      this.useridAlreadyTaken = '';\n      this.sessionId = id;\n    },\n    onSetDefaults() {\n      this.$refs.connection.setDefaults();\n    },\n    onIdTaken(takenID) {\n      this.useridAlreadyTaken = takenID;\n      this.room_id = '';\n    },\n    onIsSharing(isSharing) {\n      this.isSharingOn = isSharing;\n      if (!this.isSharingOn) {\n        this.sessionId = null;\n      }\n    },\n    onViewerCount(count) {\n      this.viewerCount = count;\n    },\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Streamer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Streamer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Streamer.vue?vue&type=template&id=6d4473de&scoped=true&lang=pug&\"\nimport script from \"./Streamer.vue?vue&type=script&lang=js&\"\nexport * from \"./Streamer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Streamer.vue?vue&type=style&index=0&id=6d4473de&scoped=true&lang=sass&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6d4473de\",\n  null\n  \n)\n\nexport default component.exports","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\n\nmodule.exports = function (METHOD_NAME) {\n  var regexp = /./;\n  try {\n    '/./'[METHOD_NAME](regexp);\n  } catch (e) {\n    try {\n      regexp[MATCH] = false;\n      return '/./'[METHOD_NAME](regexp);\n    } catch (f) { /* empty */ }\n  } return false;\n};\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StopSection.vue?vue&type=style&index=0&id=474b491c&scoped=true&lang=sass&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StopSection.vue?vue&type=style&index=0&id=474b491c&scoped=true&lang=sass&\"","'use strict';\nvar $ = require('../internals/export');\nvar $includes = require('../internals/array-includes').includes;\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar USES_TO_LENGTH = arrayMethodUsesToLength('indexOf', { ACCESSORS: true, 1: 0 });\n\n// `Array.prototype.includes` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.includes\n$({ target: 'Array', proto: true, forced: !USES_TO_LENGTH }, {\n  includes: function includes(el /* , fromIndex = 0 */) {\n    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('includes');\n"],"sourceRoot":""}